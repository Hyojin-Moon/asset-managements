# 구현 계획: [기능명]

**JIRA 이슈**: [EXP-XXX]
**상태**: 🔄 진행 중
**시작일**: YYYY-MM-DD
**최종 수정일**: YYYY-MM-DD

---

**⚠️ 중요 지침**: 각 단계 완료 후:
1. ✅ 완료된 작업 체크박스 체크
2. 🧪 품질 검증 명령어 실행
3. ⚠️ 모든 품질 검증 항목 통과 확인
4. 📅 "최종 수정일" 업데이트
5. 📝 노트 섹션에 학습 내용 기록
6. ➡️ 다음 단계로 진행

⛔ **품질 검증을 건너뛰거나 실패한 상태로 진행하지 마세요**

---

## 📋 개요

### 기능 설명
[이 기능의 목적과 필요성]

### 성공 기준
- [ ] 기준 1
- [ ] 기준 2
- [ ] 기준 3

### 사용자 영향
[사용자에게 주는 이점 또는 제품 개선 효과]

### 관련 페이지 경로
[해당 기능이 적용되는 웹뷰 경로]
- `/path/to/page`

---

## 🏗️ 아키텍처 결정

| 결정 사항 | 근거 | 트레이드오프 |
|----------|------|------------|
| [결정 1] | [이 방식을 선택한 이유] | [포기하는 것] |
| [결정 2] | [이 방식을 선택한 이유] | [포기하는 것] |

---

## 📦 의존성

### 시작 전 필요 사항
- [ ] 의존성 1: [설명]
- [ ] 의존성 2: [설명]

### 외부 의존성
- 패키지/라이브러리 1: 버전 X.Y.Z
- 패키지/라이브러리 2: 버전 X.Y.Z

### 네이티브 앱 연동
- [ ] iOS 브릿지 함수 필요: [함수명]
- [ ] Android 브릿지 함수 필요: [함수명]

---

## 🧪 테스트 전략

### 테스트 접근 방식
이 프로젝트는 Jest를 사용하며, 수동 테스트와 함께 핵심 로직에 대한 단위 테스트를 작성합니다.

### 테스트 범위
| 테스트 유형 | 대상 | 목적 |
|-----------|------|------|
| **단위 테스트** | 유틸 함수, Redux 리듀서/액션 | 핵심 비즈니스 로직 검증 |
| **수동 테스트** | 웹뷰 UI, 네이티브 브릿지 | 사용자 플로우 및 네이티브 연동 검증 |

### 테스트 파일 구조
```
__tests__/
├── utils/           # 유틸리티 함수 테스트
├── redux/           # Redux 모듈 테스트
└── components/      # 컴포넌트 테스트 (필요시)
```

### 수동 테스트 체크리스트
- [ ] 로컬 환경 (`http://localhost:3001`)에서 확인
- [ ] iOS 시뮬레이터 웹뷰에서 확인
- [ ] Android 에뮬레이터 웹뷰에서 확인
- [ ] 네이티브 브릿지 함수 동작 확인

---

## 🚀 구현 단계

### 1단계: [기초 작업]
**목표**: [이 단계에서 달성할 구체적인 기능]
**상태**: ⏳ 대기 | 🔄 진행 중 | ✅ 완료

#### 작업 목록

- [ ] **작업 1.1**: [컴포넌트/모듈 구현]
  - 파일: `pages/[feature]/index.tsx` 또는 `components/[Feature]/index.tsx`
  - 설명: [구현 내용]

- [ ] **작업 1.2**: [스타일 작업]
  - 파일: `components/[Feature]/styled.ts`
  - 설명: styled-components로 스타일 구현

- [ ] **작업 1.3**: [상태 관리] (필요시)
  - 파일: `redux/modules/[feature].ts`
  - 설명: Redux 액션/리듀서/사가 구현

- [ ] **작업 1.4**: [API 연동] (필요시)
  - 파일: `api/[feature].ts`
  - 설명: API 호출 함수 구현

#### 품질 검증 ✋

**⚠️ 중지: 모든 검증 항목을 통과하기 전까지 2단계로 진행하지 마세요**

**빌드 & 테스트**:
- [ ] **빌드**: `npm run build-dev` 오류 없이 완료
- [ ] **테스트**: `npm test` 모든 테스트 통과
- [ ] **개발 서버**: `npm run dev` 정상 실행

**코드 품질**:
- [ ] **TypeScript**: 타입 에러 없음
- [ ] **Import 순서**: CLAUDE.md의 import 순서 규칙 준수
- [ ] **코드 스타일**: 프로젝트 컨벤션 준수

**수동 테스트**:
- [ ] 로컬 환경에서 페이지 접근 가능
- [ ] 기본 UI 렌더링 정상
- [ ] 콘솔 에러 없음

**검증 명령어**:
```bash
# 테스트 실행
npm test

# 개발 빌드
npm run build-dev

# 개발 서버 실행
npm run dev

# 접근 URL 예시
# http://localhost:3001/[페이지경로]
```

**수동 테스트 체크리스트**:
- [ ] 테스트 1: [검증할 시나리오]
- [ ] 테스트 2: [검증할 엣지 케이스]
- [ ] 테스트 3: [검증할 에러 처리]

---

### 2단계: [핵심 기능 구현]
**목표**: [구체적인 산출물]
**상태**: ⏳ 대기 | 🔄 진행 중 | ✅ 완료

#### 작업 목록

- [ ] **작업 2.1**: [UI 컴포넌트 구현]
  - 파일: `components/[Feature]/[Component].tsx`
  - 설명: [구현 내용]

- [ ] **작업 2.2**: [비즈니스 로직 구현]
  - 파일: `utils/[feature].ts` 또는 `hooks/use[Feature].ts`
  - 설명: [구현 내용]

- [ ] **작업 2.3**: [네이티브 브릿지 연동] (필요시)
  - 파일: `utils/postMessage.ts` 사용
  - 설명: [연동할 브릿지 함수]

- [ ] **작업 2.4**: [Amplitude 이벤트 추가] (필요시)
  - 파일: `utils/constants/amplitude.ts`
  - 설명: 이벤트 상수 추가 및 트래킹 코드 삽입

#### 품질 검증 ✋

**⚠️ 중지: 모든 검증 항목을 통과하기 전까지 3단계로 진행하지 마세요**

**빌드 & 테스트**:
- [ ] **빌드**: 오류 없이 완료
- [ ] **테스트**: 모든 테스트 통과

**코드 품질**:
- [ ] TypeScript 타입 에러 없음
- [ ] Import 순서 규칙 준수
- [ ] 코드 스타일 준수

**수동 테스트**:
- [ ] 기능 정상 동작 확인
- [ ] 네이티브 브릿지 연동 확인 (해당시)
- [ ] Amplitude 이벤트 발송 확인 (해당시)

**수동 테스트 체크리스트**:
- [ ] 테스트 1: [검증할 시나리오]
- [ ] 테스트 2: [검증할 엣지 케이스]
- [ ] 테스트 3: [검증할 에러 처리]

---

### 3단계: [마무리 및 검증]
**목표**: [구체적인 산출물]
**상태**: ⏳ 대기 | 🔄 진행 중 | ✅ 완료

#### 작업 목록

- [ ] **작업 3.1**: [UI 마무리 및 반응형 대응]
  - 파일: `components/[Feature]/styled.ts`
  - 설명: 다양한 화면 크기 대응

- [ ] **작업 3.2**: [에러 처리 및 로딩 상태]
  - 파일: 관련 컴포넌트
  - 설명: 에러 UI, 로딩 스피너 등 추가

- [ ] **작업 3.3**: [코드 정리]
  - 파일: 전체 관련 파일
  - 설명:
    - 불필요한 코드 제거
    - 명명 규칙 통일
    - console.log 제거

#### 품질 검증 ✋

**⚠️ 중지: 모든 검증 항목을 통과하기 전까지 완료 처리하지 마세요**

**빌드 & 테스트**:
- [ ] **빌드**: `npm run build-dev` 오류 없이 완료
- [ ] **테스트**: `npm test` 모든 테스트 통과

**코드 품질**:
- [ ] TypeScript 타입 에러 없음
- [ ] console.log 및 디버그 코드 제거
- [ ] 불필요한 주석 제거

**수동 테스트 (최종)**:
- [ ] 로컬 환경 테스트 완료
- [ ] iOS 웹뷰 테스트 완료
- [ ] Android 웹뷰 테스트 완료
- [ ] 다양한 화면 크기 테스트 완료

**수동 테스트 체크리스트**:
- [ ] 테스트 1: [검증할 시나리오]
- [ ] 테스트 2: [검증할 엣지 케이스]
- [ ] 테스트 3: [검증할 에러 처리]

---

## ⚠️ 위험 요소 평가

| 위험 요소 | 발생 확률 | 영향도 | 대응 방안 |
|----------|---------|--------|----------|
| [위험 1: 예) API 변경으로 연동 실패] | 낮음/중간/높음 | 낮음/중간/높음 | [구체적인 대응 방법] |
| [위험 2: 예) 네이티브 브릿지 호환성] | 낮음/중간/높음 | 낮음/중간/높음 | [구체적인 대응 방법] |
| [위험 3: 예) 앱 버전별 동작 차이] | 낮음/중간/높음 | 낮음/중간/높음 | [구체적인 대응 방법] |

---

## 🔄 롤백 전략

### 1단계 실패 시
**복구 방법**:
- 변경된 파일 되돌리기: [파일 목록]
- git checkout으로 이전 상태 복원

### 2단계 실패 시
**복구 방법**:
- 1단계 완료 상태로 복원
- 변경 파일 되돌리기: [파일 목록]

### 3단계 실패 시
**복구 방법**:
- 2단계 완료 상태로 복원
- [추가 정리 작업]

---

## 📊 진행 상황

### 완료 현황
- **1단계**: ⏳ 0% | 🔄 50% | ✅ 100%
- **2단계**: ⏳ 0% | 🔄 50% | ✅ 100%
- **3단계**: ⏳ 0% | 🔄 50% | ✅ 100%

**전체 진행률**: X% 완료

---

## 📝 노트 및 학습 내용

### 구현 노트
- [구현 중 발견한 인사이트]
- [원래 계획에서 변경된 결정 사항]
- [디버깅 중 발견한 유용한 정보]

### 발생한 장애물
- **장애물 1**: [설명] → [해결 방법]
- **장애물 2**: [설명] → [해결 방법]

### 향후 개선점
- [다음에 다르게 할 점]
- [잘 작동한 점]

---

## 📚 참고 자료

### 문서
- [관련 문서 링크]
- [API 레퍼런스 링크]
- [디자인 목업 링크 (Figma 등)]

### 관련 이슈
- JIRA EXP-XXX: [설명]
- PR #X: [설명]

---

## ✅ 최종 체크리스트

**완료 처리 전 확인 사항**:
- [ ] 모든 단계 완료 및 품질 검증 통과
- [ ] 로컬 환경 테스트 완료
- [ ] iOS/Android 웹뷰 테스트 완료
- [ ] 네이티브 브릿지 연동 테스트 완료 (해당시)
- [ ] Amplitude 이벤트 트래킹 확인 (해당시)
- [ ] 코드 리뷰 완료
- [ ] JIRA 이슈 상태 업데이트

---

## 📖 프로젝트 구조 참고

### LaundryGo 웹뷰 디렉토리 구조

```
pages/                    # Next.js 페이지 (라우팅)
├── store/               # 스토어 관련 페이지
├── guide/               # 가이드 페이지
├── subscription/        # 구독 관련 페이지
├── landing/             # 랜딩 페이지
└── event/               # 이벤트 페이지

components/              # 재사용 컴포넌트
├── [Feature]/
│   ├── index.tsx       # 메인 컴포넌트
│   └── styled.ts       # styled-components

redux/modules/           # Redux ducks 패턴
├── store.ts            # 스토어 모듈
├── user.ts             # 사용자 모듈
└── [feature].ts        # 기능별 모듈

api/                     # API 서비스
├── lib/fetcher.ts      # Axios 인스턴스
└── [feature].ts        # 기능별 API

utils/                   # 유틸리티
├── postMessage.ts      # 네이티브 브릿지
├── common.ts           # 공통 유틸
└── constants/          # 상수
    └── amplitude.ts    # Amplitude 이벤트

hooks/                   # 커스텀 훅
contexts/               # React Context
types/                  # TypeScript 타입
```

### 네이티브 브릿지 함수 예시

```typescript
// utils/postMessage.ts 사용 예시
import { showToast, closeWindow, pagePush, brazeEvent, kakaoShare } from '~/utils/postMessage';

// 토스트 메시지
showToast('메시지 내용');

// 창 닫기
closeWindow();

// 페이지 이동
pagePush('/path/to/page');

// Braze 이벤트
brazeEvent('event_name', { key: 'value' });
```

### Amplitude 이벤트 예시

```typescript
import * as amplitude from '@amplitude/analytics-browser';
import { AMPLITUDE_EVENTS } from '~/utils/constants/amplitude';

// 이벤트 트래킹
amplitude.track(AMPLITUDE_EVENTS.STORE_ORDER_BT_CLICKED, {
  product_id: '123',
  product_name: '상품명'
});
```

---

**계획 상태**: 🔄 진행 중
**다음 작업**: [다음에 해야 할 일]
**차단 요소**: [현재 차단 요소] 또는 없음
